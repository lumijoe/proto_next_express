<!-- views/index.ejs -->

<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type"
        content="text/html; charset=UTF-8">
    <title><%= title %></title>
    <link rel="stylesheet"
    href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"
    crossorigin="anonymous" />
    <link rel='stylesheet' href='/stylesheets/style.css' />
    <link rel="shortcut icon" href="/images/favicon.ico" type="image/x-icon">
    <script>
      document.addEventListener('DOMContentLoaded', function () {
          // 収入金額と支出金額の入力フィールドを取得
          var amountIncomeInput = document.getElementById('amountIncome');
          var amountExpenditureInput = document.getElementById('amountExpenditure');
          // 残高を表示する入力フィールドを取得
          var amountBalanceInput = document.getElementById('amountBalance');
  
          // 収入金額と支出金額が変更されたときのイベントリスナーを追加
          amountIncomeInput.addEventListener('input', updateBalance);
          amountExpenditureInput.addEventListener('input', updateBalance);
  
          // 残高を計算して表示する関数
          function updateBalance() {
              var income = parseFloat(amountIncomeInput.value) || 0;
              var expenditure = parseFloat(amountExpenditureInput.value) || 0;
              var balance = income - expenditure;
  
              // 計算結果を残高の入力フィールドに反映
              amountBalanceInput.value = balance.toFixed(0); // 小数点以下2桁まで表示
  
              // フォームが有効な場合、送信ボタンを有効にする（送信ボタンのIDがsubmitBtnと仮定）
              document.getElementById('submitBtn').disabled = false;
          }
      });
    </script>
  </head>
  <body>
    <!-- タイトル -->
    <img src="/images/favicon.ico" alt="キャッシュニャンアイコン" width="52" height="52">
    <h1><%= title %></h1>
    <p>まいにち、猫と。<br>支出管理はキャッシュニャン</p>
    
    
    <!-- モバイルイメージ -->
    <div class="position-relative">
      <img src="/images/mobile.png" alt="モバイルイメージ" width="500px" height="auto">
      <h2 style="position: absolute; top: 120px; left: 60px; color: white;">支出入力</h2>

      <!-- モバイルヒーロー -->
      <img src="/images/catHero.jpg" alt="クリスマスらしきゴールド照明の背景の中で猫がソファに横たわりながらこちらを向いている画像" width="363px" height="auto" style="position: absolute; top: 169px; left:41px;">
      
      <!-- 入力フォーム -->
      <div style="position: absolute; top: 450px; left: 108px; margin-top: -10px;">
        <form method="post" action="/amount/add">
          <!-- カテゴリ -->
          <div class="form-group">
            <label for="category" style="margin: 0;">カテゴリ</label>
            <input type="text" name="category" id="category" class="form-control" value="銀行C">
          </div>
          <!-- 収入 -->
          <div class="form-group" style="margin-top: -10px;">
            <label for="amountIncome" style="margin: 0;">収入金額</label>
            <input type="number" name="amountIncome" id="amountIncome" class="form-control">
          </div>
          <!-- 支出 -->
          <div class="form-group" style="margin-top: -10px;">
            <label for="amountExpenditure" style="margin: 0;">支出金額</label>
            <input type="number" name="amountExpenditure" id="amountExpenditure" class="form-control">
          </div>
          <!-- 残高自動計算 -->
          <div class="form-group" style="margin-top: -10px;">
            <label for="amountBalance" style="margin: 0;">残高
            <span style="font-size: 10px; color: rgb(16, 137, 141);">収入-支出（自動計算）</span></label>
            <input type="number" name="amountBalance" id="amountBalance" class="form-control" readonly>
          </div>
          <!-- 保存ボタン -->
          <div style="text-align: center;">
            <button type="submit"
            id="submitBtn" style="font-size: 12px; background-color:black; border-style: none; color: white; height: 40px; width: 120px; border-radius: 50px 50px; justify-content: center;">保存する</button>
          </div>
        </form>
      </div>
      <!-- 入力フォームここまで -->

      <!-- モバイルボトムナビ -->
      <div style="background-color: rgba(255, 255, 255, 0.95); width: 363px; height: 60px; position: absolute; top: 775px; left: 41px; border-radius: 0px 0px 30px 30px; align-items: center;">
        <div class="d-flex flex-row justify-content-around" style="margin-top: 8px;">
          <div></div>
          <div>
            <img src="/images/iconMemo.svg" alt="入力をイメージしたアイコン" style="width:30px; height: 30px;">
            <p style="font-size: 10px; text-align: center;">入力</p>
          </div>
          <div>
            <img src="/images/iconList.svg" alt="一覧リストをイメージしたアイコン" style="width:30px; height: 30px;">
            <p style="font-size: 10px; text-align: center;">一覧</p>
          </div>
          <div></div>

        </div>
      </div>
    </div>
  </body>
</html>


